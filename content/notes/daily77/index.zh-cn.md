---
title: "dont repeat your self"
date: 2019-11-25
tags:
  - 编程技巧
  - 代码设计
  - 软件开发
---

# 如何设计通用的小轮子：以轮询为例

---

## **1. 问题背景**

在开发过程中，我们经常会根据业务需求快速实现一些功能模块（如轮询）。然而，这些模块可能因为缺乏通用性而难以复用。  
**问题的核心**：如何让小轮子更通用？

---

## **2. 解决思路**

### **2.1 理解业务场景**
- **深入分析需求**  
  - 首先明确业务场景的具体需求。例如，在"轮询上传"中，需要完成哪些任务？  
    - 数据的定时获取与上传。
    - 错误处理与重试机制。
    - 状态更新与反馈。
- **不清晰时怎么办？**  
  - 多使用产品，从用户角度理解需求。  
  - 参考其他优秀的设计案例，学习其通用性设计的思路。

### **2.2 设计通用的 API**
- **目标**：API 应具备灵活性和扩展性，能够适应多种场景。  
- **步骤**：
  1. 抽象出核心功能，剥离与具体业务无关的部分。  
  2. 提供可配置的参数，允许用户根据需求调整行为。  
     - 示例：轮询间隔时间、超时设置、重试次数等。  
  3. 考虑边界情况，确保模块的健壮性。  
     - 示例：网络中断时如何处理？上传失败后是否支持断点续传？

### **2.3 完成与优化**
- **验证通用性**  
  - 将模块应用于不同的业务场景，测试其适应性。  
- **持续优化**  
  - 根据实际使用中的反馈，不断改进设计，提升模块的易用性和性能。

---

## **3. 实践建议**

- **多体验产品**  
  - 通过亲身体验，理解不同场景下的需求差异。  
- **学习他人设计**  
  - 阅读开源项目的代码，分析其通用性设计的亮点。  
- **总结与复盘**  
  - 每次完成一个模块后，回顾其设计过程，思考如何进一步提升通用性。

---

## **总结**

- **关键点**  
  - 通用性设计的核心在于对业务场景的深刻理解。  
  - 通过抽象功能、提供灵活的 API 和考虑边界情况，可以让小轮子更加通用。  
  - 不断学习和实践，积累经验，逐步提升设计能力。

> **结论**：通用性并非一蹴而就，而是通过深入理解需求、精心设计和持续优化逐步实现的。
